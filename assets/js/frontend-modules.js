var x=!1;jQuery(function(c){var u={init:function(){c(".variations_form").addClass("swatches-support"),c(".variations_form").on("click",".swatch",this.select_attributes),c(".variations_form").on("click",".reset_variations",this.reset_attributes),c(document).ajaxComplete(this.ajax_quick_view),c(document).ajaxStop(function(){x=!1}),c(document).ajaxComplete(function(t,a,e){"string"==typeof e.url&&e.url.includes("get_variation")&&200==a.status&&u.trigger_price_matrix()})},ajax_quick_view:function(t,a,e){!x&&"string"==typeof e.data&&e.data&&e.data.includes("action=yith_load_product_quick_view")&&(u.init(),x=!0)},select_attributes:function(){var t=[],a=c(this),e=a.closest(".nbtcs-swatches").prev().find("select"),i=(a.closest(".nbtcs-swatches"),e.data("attribute_name")||e.attr("name")),s=a.attr("data-value");if(e.trigger("focusin"),!e.find('option[value="'+s+'"]').length)return a.siblings(".swatch").removeClass("selected"),e.val("").change(),void c(".variations_form").trigger("tawcvs_no_matching_variations",[a]);clicked=i,-1===t.indexOf(i)&&t.push(i),a.hasClass("swatch-radio")?e.val(s):a.hasClass("selected")?(e.val(""),a.removeClass("selected"),delete t[t.indexOf(i)]):(a.addClass("selected").siblings(".selected").removeClass("selected"),e.val(s));var r=c(".variations_form table.variations td.value select"),o=r.length,n=0,l=[];r.each(function(t){var a=c(this).attr("data-attribute_name"),e=c(this).val();a=a.replace("attribute_","");o-1==t&&c(".pm-select-last").length<=0&&c(this).addClass("pm-select-last"),e&&(n+=1,l.push(md5(a+e)))}),o==n&&(e.trigger("change"),u.trigger_price_matrix())},trigger_price_matrix:function(){c(this);if(0<c(".price-matrix-table").length){c(".pm-td-price").removeClass("selected");var t="pm-price-"+c(".variation_id").val();c("#"+t).addClass("selected"),c("table.un-variations td.value select").each(function(t){var a=c(this).attr("data-attribute_name"),e=c('[data-attribute_name="attribute_'+a+'"]').val();c(this).val(e)})}},select_attributes_radio:function(){c(this);alert(2)},reset_attributes:function(){c(this).closest(".variations_form").find(".swatch.selected").removeClass("selected"),c(this).closest(".variations_form").find('[type="radio"]').prop("checked",!1),selected=[]}};u.init()});x=!1;jQuery(function(t){}),jQuery(function(d){var t=d(".variations_form"),e=function(){t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},r=function(){t.unblock()},o={init:function(){d(document).on("click",".pure-table .pm-td-price",this.selected_price),d(document).on("change","table.un-variations tr:visible select",this.change_attr),Tippy(".tippy",{animation:"scale",duration:200,arrow:!0,position:"bottom"}),d(window).load(this.window_load),null!=nbt_solutions.isCalculatorText&&""!==nbt_solutions.isCalculatorText&&d(document).on("change",'body.single-product input[name="quantity"]',this.change_price_calculator),d(".variations_form table.variations").hide()},change_price_calculator:function(){var t=d("#price-matrix-wrapper td.selected"),r=d('body.single-product input[name="quantity"]').val(),o=d("#price-matrix-wrapper").attr("data-format_price"),a=nbt_solutions.decimal;if(0<t.length){var e=t.attr("data-price"),i=e*r,s=accounting.formatMoney(i,{symbol:"",decimal:a,thousand:nbt_solutions.thousand,precision:nbt_solutions.precision,format:""}),n=o.replace("{price}",s);if(d(".woocommerce-variation-price > .price").html(n),null!=nbt_solutions.isCalculatorText&&""!==nbt_solutions.isCalculatorText){var l=accounting.formatMoney(e,{symbol:nbt_solutions.symbol,decimal:a,thousand:nbt_solutions.thousand,precision:nbt_solutions.precision,format:nbt_solutions.format}),c=accounting.formatMoney(i,{symbol:nbt_solutions.symbol,decimal:a,thousand:nbt_solutions.thousand,precision:nbt_solutions.precision,format:nbt_solutions.format}),u="";u+="<label>"+nbt_solutions.pricematrix.total_label+":</label>",u+=" "+l+" x "+r,u+=" = "+c,d(".nbpm-calculator").html('<p class="nbpm-calculator-price">'+u+"</p>")}}null!=nbt_solutions.isCalculatorText&&""!==nbt_solutions.isCalculatorText&&(d("table.price-matrix-table td.pm-td-price").each(function(t){var a=d(this).attr("data-price"),e=d(this).attr("data-original-title"),i=a*r,s=e.replace(/<td class="total_price">(.*)<\/td>/gm,'<td class="total_price">'+o.replace("{price}",i)+"</td>");d(this).attr("title",s)}),Tippy(".tippy",{animation:"scale",duration:200,arrow:!0,position:"bottom"}))},autoload_pm:function(){if(d("#single-product_variations").length){var t=d("#single-product_variations").attr("data-product_variations"),a=d("#single-product_variations").attr("data-attr"),e=d("#single-product_variations").attr("data-count");d.ajax({url:nbt_solutions.ajax_url,data:{action:"pm_autoload",security:d('[name="security"]').val(),product_id:d('[name="add-to-cart"]').val(),vacant:d.parseJSON(t),attr:d.parseJSON(a),count:e,suffix:d(".un-variations").attr("data-suffix")},type:"POST",success:function(t){r(),d("body").append(t)},error:function(){}})}},window_load:function(){o.set_last_attribtutes(),o.set_default_attributes(!1)},set_default_attributes:function(t){if(0<d(".un-variations").length)if(t)o.trigger_default_attributes();else{var a=d(".un-variations td.value select").length,e=0;d(".un-variations td.value select").each(function(t){var a=d(this).attr("data-attribute_name");d(this).val();void 0!==nbt_solutions.default_attributes[a]&&(e+=1)}),a==e&&(d(".un-variations tr:last-child select").trigger("change"),nbt_solutions.debug&&(console.log("%c Turn on debug!","background: #222; color: #bada55"),console.log("trigger select variations default!")))}else t||o.trigger_default_attributes()},set_last_attribtutes:function(){if(d("form.variations_form .variations select.pm-select-last").length<=0){var a=d("form.variations_form .variations select").length-1;d("form.variations_form .variations select").each(function(t){d(this).is("[data-attribute_name]")&&t==a&&d(this).addClass("pm-select-last")}),nbt_solutions.debug&&(console.log("%c Turn on debug!","background: #222; color: #bada55"),console.log("set_last_attribtutes!"))}},trigger_default_attributes:function(){nbt_solutions.debug&&(console.log("%c Turn on debug!","background: #222; color: #bada55"),console.log("trigger_default_attributes!"));var t=d("table.variations td.value select").length,i=0;d("table.variations td.value select").each(function(t){var a=d(this).attr("data-attribute_name"),e=d(this).val();a=a.replace("attribute_","");void 0!==nbt_solutions.default_attributes[a]&&(d(this).val(e),i+=1)}),t==i&&d(".pm-select-last").trigger("change")},change_attr:function(){var t=d(this).val();e();var a=d("table.un-variations tr:visible select").length,i={},s=0;d("table.un-variations tr:visible select").each(function(t){if(d(this).val()){var a=d(this).closest("select").attr("id"),e=d(this).val();i[a]=e,a+e,s+=1}}),t&&a==s?d.ajax({url:nbt_solutions.ajax_url,data:{action:"pm_load_matrix",security:d('[name="security"]').val(),product_id:d('[name="add-to-cart"]').val(),attr:i},type:"POST",datatype:"json",success:function(t){null!=t.complete&&(d(".price_attr").remove(),d('.table-responsive, [name="price_attr"], [name="security"]').remove(),d("#price-matrix-wrapper .load-table-pm").show().html(t.return),Tippy(".tippy",{animation:"scale",duration:200,arrow:!0,position:"bottom"}),o.set_default_attributes(!0)),r()},error:function(){alert("There was an error when processing data, please try again !")}}):(d(".table-responsive").remove(),r())},selected_price:function(){d(this).html(),d("form.variations_form select").length;d(".pure-table td.pm-td-price").not(d(this)).hasClass("selected")&&d(".pure-table td.pm-td-price.selected").removeAttr("style"),d(".pure-table .pm-td-price").removeClass("selected"),d(this).addClass("selected");var t=d(this).attr("data-attr");d(".nbtcs-swatches .swatch").removeClass("selected"),d.each(JSON.parse(t),function(t,a){d('[name="attribute_'+a.name+'"]').val(a.value),d(".nbtcs-swatches").length&&d('.nbtcs-swatches [data-value="'+a.value+'"]').addClass("selected")}),d("form.variations_form .variations select.pm-select-last").trigger("change"),nbt_solutions.is_scroll&&d("html,body").animate({scrollTop:d("form.variations_form").find('[type="submit"]').offset().top-150},"slow"),o.change_price_calculator()}};0<d(".pure-table").length&&o.init()});